<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="board">

<insert id="addContentInfo" parameterType="kr.co.korea.beans.ContentBean">
<selectKey keyProperty="content_idx" order="BEFORE" resultType="java.lang.Integer">
	select content_seq.nextval from dual
</selectKey>
	<![CDATA[
	insert into CONTENT_TABLE(content_idx, content_subject, content_text,
	content_file, content_writer_idx, content_board_idx, content_date)
	values(#{content_idx}, #{content_subject}, #{content_text}, 
	#{content_file}, #{content_writer_idx}, #{content_board_idx},
	sysdate)
	]]>
</insert>
<select id="getBoardInfoName" parameterType="java.lang.Integer" resultType="java.lang.String">
	<![CDATA[
		select board_info_name 
		from BOARD_INFO_TABLE
		where board_info_idx=#{board_info_idx}
	]]>
</select>
<select id="getContentList" parameterType="java.lang.Integer" resultType="kr.co.korea.beans.ContentBean">
	<![CDATA[
	select con.content_idx, 
       con.content_subject, 
       use.mname as content_write_name, 
       to_char(con.content_date, 'YYYY-MM-DD')as content_date
	from content_table con, member use
	where con.content_writer_idx=use.midx
	and con.content_board_idx=#{board_info_idx}
	order by con.content_idx desc
    ]]>
</select>
<select id="getContentInfo" parameterType="Integer" resultType="kr.co.korea.beans.ContentBean">
	<![CDATA[
		select use.mname as content_write_name, 
		       to_char(con.content_date, 'YYYY-MM-DD') as content_date,
		       con.content_subject, 
		       con.content_text, 
		       con.content_file,
		       con.content_writer_idx
		from content_table con, member use
		where con.content_writer_idx=use.midx
		and content_idx=#{content_idx}
    ]]>
</select>
<update id="modifyContentInfo" parameterType="kr.co.korea.beans.ContentBean">
	<![CDATA[
update content_table 
set content_subject =#{content_subject}, 
    content_text=#{content_text}, 
    content_file=#{content_file, jdbcType=VARCHAR}
where content_idx=#{content_idx}
    ]]>
</update>

<delete id="deleteContentInfo" parameterType="java.lang.Integer">
	<![CDATA[
	delete from content_table 
	where content_idx=#{content_idx}
	 ]]>
</delete>

<select id="getContentCnt" parameterType="java.lang.Integer" resultType="java.lang.Integer">
	<![CDATA[
	select count(*) 
	from content_table 
	where content_board_idx=#{content_board_idx}
	 ]]>
</select>
</mapper>



